---
import { ArrowRight, Download } from "lucide-astro";
---

<section
  id="about"
  class="min-h-screen flex items-center justify-center pt-32 relative overflow-hidden bg-transparent"
>
  <div
    class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 w-full text-center"
  >
    <div class="space-y-8">
      <h1
        class="text-6xl font-playfair sm:text-8xl md:text-9xl font-bold tracking-tight text-slate-900 dark:text-white leading-[1.1]"
      >
        <div class="overflow-hidden">
          <span class="inline-block">Mendesain</span>
        </div>
        <div class="overflow-hidden relative">
          <span class="inline-block relative z-10">Masa Depan</span>
          <div
            class="absolute bottom-2 left-0 w-full h-4 bg-amber-300/30 dark:bg-amber-600/20 -z-0 rotate-1 gsap-hero-line origin-left scale-x-0"
          >
          </div>
        </div>
      </h1>

      <div class="flex flex-col items-center gap-6">
        <div
          class="text-xl sm:text-3xl font-playfair italic text-slate-600 dark:text-slate-300 min-h-[40px]"
        >
          <span
            id="typewriter"
            class="border-r-2 border-amber-500 pr-1 font-playfair"></span>
        </div>

        <p
          class="gsap-hero-text text-lg text-slate-600 dark:text-slate-400 max-w-xl mx-auto leading-relaxed font-playfair"
        >
          Saya membangun aplikasi, platform, dan solusi teknologi yang membantu
          bisnis dan pendidikan bekerja lebih cepat, lebih terstruktur, dan
          lebih cerdas.
        </p>
      </div>

      <div
        class="gsap-hero-btn flex flex-wrap justify-center gap-6 pt-8 opacity-0 translate-y-4"
      >
        <a
          href="#contact"
          class="px-8 py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-950 rounded-full font-medium hover:bg-slate-800 dark:hover:bg-slate-200 transition-all flex items-center gap-2 group shadow-xl shadow-slate-900/10 dark:shadow-none"
        >
          Hubungi Saya
          <ArrowRight
            class="w-4 h-4 group-hover:translate-x-1 transition-transform"
          />
        </a>
        <a
          href="#"
          class="px-8 py-4 bg-transparent border border-slate-300 dark:border-slate-700 text-slate-900 dark:text-white rounded-full font-medium hover:border-amber-500 hover:text-amber-600 dark:hover:border-amber-500 dark:hover:text-amber-400 transition-all flex items-center gap-2 group"
        >
          Unduh CV
          <Download
            class="w-4 h-4 group-hover:translate-y-1 transition-transform"
          />
        </a>
      </div>
    </div>
  </div>

  <!-- Ambient floating dots -->
  <div
    class="absolute inset-0 overflow-hidden pointer-events-none z-0"
    aria-hidden="true"
  >
    <div
      class="hero-dot absolute w-1 h-1 bg-amber-400/20 rounded-full"
      style="top:20%;left:15%"
    >
    </div>
    <div
      class="hero-dot absolute w-1.5 h-1.5 bg-amber-400/15 rounded-full"
      style="top:60%;left:80%"
    >
    </div>
    <div
      class="hero-dot absolute w-1 h-1 bg-slate-400/20 rounded-full"
      style="top:40%;left:65%"
    >
    </div>
    <div
      class="hero-dot absolute w-2 h-2 bg-amber-400/10 rounded-full"
      style="top:75%;left:30%"
    >
    </div>
    <div
      class="hero-dot absolute w-1 h-1 bg-slate-400/15 rounded-full"
      style="top:30%;left:90%"
    >
    </div>
    <div
      class="hero-dot absolute w-1.5 h-1.5 bg-amber-400/15 rounded-full"
      style="top:85%;left:55%"
    >
    </div>
  </div>

  <!-- Scroll indicator -->
  <div
    id="scroll-indicator"
    class="absolute bottom-8 left-1/2 -translate-x-1/2 flex flex-col items-center gap-2 z-10"
  >
    <span
      class="text-xs font-medium tracking-[0.3em] uppercase text-slate-400 dark:text-slate-500"
      >Scroll</span
    >
    <div
      class="w-px h-8 bg-gradient-to-b from-amber-500/60 to-transparent scroll-line-anim"
    >
    </div>
  </div>
</section>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  // Typewriter Logic
  const words = [
    "Web Developer",
    "System Builder",
    "Project Manager",
    "Founder",
  ];
  let i = 0;
  let j = 0;
  let currentWord = "";
  let isDeleting = false;

  function type() {
    currentWord = words[i];
    const element = document.getElementById("typewriter");

    if (!element) return;

    if (isDeleting) {
      element.textContent = currentWord.substring(0, j - 1);
      j--;
      if (j == 0) {
        isDeleting = false;
        i++;
        if (i == words.length) {
          i = 0;
        }
      }
    } else {
      element.textContent = currentWord.substring(0, j + 1);
      j++;
      if (j == currentWord.length) {
        isDeleting = true;
      }
    }
    setTimeout(type, isDeleting ? 100 : 200);
  }

  // GSAP Animations
  document.addEventListener("DOMContentLoaded", () => {
    const tl = gsap.timeline({ defaults: { ease: "power4.out" } });

    tl.from(".gsap-hero-text", {
      y: 100,
      opacity: 0,
      duration: 1.5,
      stagger: 0.1,
      delay: 0.5,
    })
      .to(
        ".gsap-hero-line",
        {
          scaleX: 1,
          duration: 1,
          ease: "power2.inOut",
        },
        "-=1",
      )
      .to(
        ".gsap-hero-btn",
        {
          y: 0,
          opacity: 1,
          duration: 1,
          stagger: 0.2,
        },
        "-=0.5",
      );

    // Animate floating dots
    gsap.utils.toArray(".hero-dot").forEach((dot: any, i: number) => {
      gsap.to(dot, {
        y: `random(-20, 20)`,
        x: `random(-15, 15)`,
        duration: `random(3, 6)`,
        repeat: -1,
        yoyo: true,
        ease: "sine.inOut",
        delay: i * 0.3,
      });
    });

    // Scroll indicator animation
    const scrollIndicator = document.getElementById("scroll-indicator");
    if (scrollIndicator) {
      gsap.to(scrollIndicator, {
        y: 8,
        duration: 1.2,
        repeat: -1,
        yoyo: true,
        ease: "power1.inOut",
      });

      // Fade out on scroll
      ScrollTrigger.create({
        trigger: "#about",
        start: "top 90%",
        onEnter: () => gsap.to(scrollIndicator, { opacity: 0, duration: 0.5 }),
        onLeaveBack: () =>
          gsap.to(scrollIndicator, { opacity: 1, duration: 0.5 }),
      });
    }

    // Start typewriter after intro
    setTimeout(() => {
      type();
    }, 2000);
  });
</script>

<style>
  .scroll-line-anim {
    animation: scrollLineGlow 2s ease-in-out infinite;
  }
  @keyframes scrollLineGlow {
    0%,
    100% {
      opacity: 0.4;
    }
    50% {
      opacity: 1;
    }
  }
</style>
